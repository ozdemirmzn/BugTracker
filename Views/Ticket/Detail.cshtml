@model Ticket
@using Microsoft.AspNetCore.Identity

@inject UserManager<ApplicationUser> UserManager

@{

   @* var photoPath1 = "~/images/" + (@Model.PhotoPath1 ?? "noimage.jpg");
    var photoPath2 = "~/images/" + (@Model.PhotoPath2 ?? "noimage.jpg");
    var photoPath3 = "~/images/" + (@Model.PhotoPath3 ?? "noimage.jpg");*@

    
    var user = await UserManager.FindByIdAsync(@Model.UserId);
    var FirstName = user.FirstName;
    var LastName = user.LastName;
    var UserName = user.Email;
}

   

<div class="bg-img bg-image fill" style="background-image: linear-gradient(to right, #b92b27, #1565c0)">
    <div class="container">
        <div class="other-page-nav-padding">
            <div class="row justify-content-center">
                <div class="col-md-10">
                    <table class="table table-striped table-dark">
                        <tr class="font-weight-bold">
                            <th>Ticket Owner</th>
                            <th>Description</th>
                            <th>TicketNumber</th>
                            <th>Email</th>
                            <th>Submission Date</th>
                            <th>Action</th>
                        </tr>
                        <tr>
                            <td>@FirstName @LastName</td>
                            <td>@Model.Description</td>
                            <td>@Model.TicketNumber</td>
                            <td>@UserName</td>
                            <td>@Model.SubmissionDate</td>
                            <td>
                                <a class="btn btn-success btn-sm" asp-controller="Ticket" asp-action="Delete" asp-route-id="@Model.Id">Solved</a>
                            </td>
                        </tr>

                    </table>
                    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" style="padding-bottom:60px;">
                        <ol class="carousel-indicators">
                            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                        </ol>
                        <div class="carousel-inner">
                            <div class="carousel-item active container-fluid">
                                <div class="d-flex justify-content-center">
                                    @if (Model.Picture1 != null)
                                    {
                                        <img id="Picture1" class="carousel-photo" data-toggle="modal" data-target="#exampleModalCenter1" src="data:image/*;base64,@(Convert.ToBase64String(Model.Picture1))" asp-append-version="true" alt="First slide">
                                    }
                                    else
                                    {
                                        <img id="Picture1" class="carousel-photo" data-toggle="modal" data-target="#exampleModalCenter1" src="~/images/noimage.jpg" asp-append-version="true" alt="First slide">
                                    }
                                </div>
                            </div>
                            <div class="carousel-item container-fluid">
                                <div class="d-flex justify-content-center">
                                    @if (Model.Picture2 != null)
                                    {
                                        <img id="Picture2" class="carousel-photo" data-toggle="modal" data-target="#exampleModalCenter2" src="data:image/*;base64,@(Convert.ToBase64String(Model.Picture2))" asp-append-version="true" alt="Second slide">
                                    }
                                    else
                                    {
                                        <img id="Picture2" class="carousel-photo" data-toggle="modal" data-target="#exampleModalCenter2" src="~/images/noimage.jpg" asp-append-version="true" alt="Second slide">
                                    }
                                    @*<img class="carousel-photo" data-toggle="modal" data-target="#exampleModalCenter2" src="@photoPath2" asp-append-version="true" alt="Second slide" />*@
                                </div>
                            </div>
                            <div class="carousel-item container-fluid">
                                <div class="d-flex justify-content-center">
                                    @if (Model.Picture3 != null)
                                    {
                                        <img id="Picture3" class="carousel-photo" data-toggle="modal" data-target="#exampleModalCenter3" src="data:image/*;base64,@(Convert.ToBase64String(Model.Picture3))" asp-append-version="true" alt="Third slide">
                                    }
                                    else
                                    {
                                        <img id="Picture3" class="carousel-photo" data-toggle="modal" data-target="#exampleModalCenter3" src="~/images/noimage.jpg" asp-append-version="true" alt="Third slide">
                                    }
                                    @*<img class="carousel-photo" data-toggle="modal" data-target="#exampleModalCenter3" src="@photoPath3" asp-append-version="true" alt="Third slide" />*@
                                </div>
                            </div>
                            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

           @* @if (Model.Picture1 != null)
            {
                <img id="Picture1" class="carousel-photo" data-toggle="modal" data-target="#exampleModalCenter1" src="data:image/*;base64,@(Convert.ToBase64String(Model.Picture1))" asp-append-version="true" alt="First slide">
            }
            else
            {
                <img id="Picture1" class="carousel-photo" data-toggle="modal" data-target="#exampleModalCenter1" src="~/images/noimage.jpg" asp-append-version="true" alt="First slide">
            }
            @if (Model.Picture2 != null)
            {
                <img id="Picture2" class="carousel-photo" src="data:image/*;base64,@(Convert.ToBase64String(Model.Picture2))">
            }
            @if (Model.Picture3 != null)
            {
                <img id="Picture3" class="carousel-photo" src="data:image/*;base64,@(Convert.ToBase64String(Model.Picture3))">
            }*@


            <!-- Modal -->
            <div class="modal fade justify-content-center" id="exampleModalCenter1" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        @if (Model.Picture1 != null)
                        {
                            <img class="carousel-photo-larger" src="data:image/*;base64,@(Convert.ToBase64String(Model.Picture1))" asp-append-version="true" />
                        }
                        else
                        {
                        <img class="carousel-photo-larger" src="~/images/noimage.jpg" asp-append-version="true" />
                        }
                    </div>
                </div>
            </div>
            <div class="modal fade justify-content-center" id="exampleModalCenter2" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        @if (Model.Picture2 != null)
                        {
                            <img class="carousel-photo-larger" src="data:image/*;base64,@(Convert.ToBase64String(Model.Picture2))" asp-append-version="true" />
                        }
                        else
                        {
                            <img class="carousel-photo-larger" src="~/images/noimage.jpg" asp-append-version="true" />
                        }
                    </div>
                </div>
            </div>
            <div class="modal fade justify-content-center" id="exampleModalCenter3" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        @if (Model.Picture3 != null)
                        {
                            <img class="carousel-photo-larger" src="data:image/*;base64,@(Convert.ToBase64String(Model.Picture3))" asp-append-version="true" />
                        }
                        else
                        {
                            <img class="carousel-photo-larger" src="~/images/noimage.jpg" asp-append-version="true" />
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>